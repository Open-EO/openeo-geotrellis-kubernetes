#!/usr/bin/env groovy

// This Jenkinsfile uses the internal VITO shared library

@Library('lib')_

containerImageBuildPipeline {
  build_args           = [
    'PYTHON_PACKAGE=python3.11-devel',
    'SPARK_PACKAGE=spark-vito-4_0_1-4.0.1-2025.09.23',
    'SPARK_INSTALL_PREFIX=/opt/spark4_0_1',
    'GEOTRELLIS_DEPENDENCIES_STATIC_JAR_URL=https://artifactory.vgt.vito.be/artifactory/libs-snapshot-public/org/openeo/geotrellis-dependencies/2.6.1_2.13-SNAPSHOT/geotrellis-dependencies-2.6.1_2.13-SNAPSHOT.jar',
  ]
  dockerfile           = 'docker/AlmaLinux/Dockerfile.almalinux9-spark-py-openeo'
  docker_registry_prod = 'vito-docker.artifactory.vgt.vito.be'
  image_name           = 'almalinux9-spark4-py311-openeo'
  image_tag            = { env -> "1.0.${env.BUILD_NUMBER}" }
  promotion_job        = false
  run_tests            = false
}
